<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Saho Secure Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0c10;
            --card: #1f1f2e;
            --primary: #00fff7;
            --secondary: #ff00f7;
            --acc: #22c55e;
            --warn: #f59e0b;
            --err: #ff1f4c;
            --txt: #e5e7eb;
        }
        * {
            box-sizing: border-box;
            font-family: Inter, sans-serif;
        }
        body {
            margin: 0;
            background: var(--bg);
            color: var(--txt);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .card {
            background: linear-gradient(135deg, #1f1f2e, #2c2c3a);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0, 255, 255, .3), 0 0 40px rgba(255, 0, 255, .2);
            width: 100%;
            max-width: 1000px;
        }
        h1, h2, h3 {
            color: var(--primary);
            text-align: center;
        }
        .hidden {
            display: none;
        }
        input, button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            margin-top: 10px;
            font-size: 16px;
            background: #111827;
            color: var(--txt);
        }
        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover {
            opacity: 0.8;
        }
        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255, 255, 255, .2);
            border-top: 6px solid var(--acc);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg) }
        }
        .infoBox {
            background: rgba(0, 255, 255, 0.1);
            padding: 10px;
            border-radius: 12px;
            margin-top: 10px;
            font-size: 14px;
            text-align: center;
        }
        .announcement {
            background: linear-gradient(135deg, rgba(0, 255, 247, 0.2), rgba(255, 0, 247, 0.2));
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
            font-size: 15px;
            color: var(--acc);
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 25px;
            margin: 30px 0;
        }
        .reset-section {
            background: rgba(245, 158, 11, 0.12);
            border: 1px solid rgba(245, 158, 11, 0.4);
            border-radius: 12px;
            padding: 18px;
            margin: 25px 0;
        }
        .reset-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            font-size: 17px;
            margin-top: 12px;
        }
        .reset-btn.external {
            background: linear-gradient(135deg, #ff00f7, #d500f9);
        }
        .reset-info {
            font-size: 14px;
            margin-top: 10px;
            color: #f59e0b;
            text-align: center;
        }
        .warning {
            background: rgba(255, 31, 76, 0.1);
            color: #ff1f4c;
            border: 1px solid #ff1f4c;
            border-radius: 12px;
            padding: 15px;
            margin-top: 12px;
            font-size: 14px;
            text-align: center;
            font-weight: 700;
            line-height: 1.4;
        }
        .reset-box {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 12px 0;
            font-size: 14px;
        }
        @media (max-width: 868px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <!-- LOGIN EKRANI -->
    <div class="card" id="loginCard">
        <h1>ğŸŒ SAHO TITAN ENGINE</h1>
        <input id="keyInput" placeholder="License Key">
        <button onclick="login()">GiriÅŸ Yap</button>
        <div id="loginStatus" class="infoBox hidden"></div>
    </div>

    <!-- DASHBOARD -->
    <div class="card hidden" id="dashboard">
        <h1>Saho V5 Black Engine</h1>

        <div id="loading" class="hidden">
            <div class="spinner"></div>
            <p>SAHO TITAN ENGINE serverine baÄŸlanÄ±lÄ±yor... ğŸŒ</p>
        </div>

        <div id="dashboardContent" class="hidden">
            <!-- Anons -->
            <div class="announcement">
                GÃ¼ncellenmiÅŸ Paneldeki Ã–zellikler Hepsi 100% Safe! ğŸš€ GÃ¼venle Kullan!
            </div>

            <!-- HWID RESET SEÃ‡ENEKLERÄ° -->
            <div class="reset-section">
                <h3>ğŸ”„ HWID Reset SeÃ§enekleri</h3>

                <div class="reset-box">
                    <strong>HWID Reset For Web</strong><br>
                    <small>(Bu tarayÄ±cÄ± / Web panel iÃ§in)</small>
                    <p>Kalan hak: <strong id="resetLeftWeb">2</strong>/2</p>
                    <button class="reset-btn" onclick="requestHwidReset('web')">SÄ±fÄ±rla (Web)</button>
                </div>

                <div class="reset-box">
                    <strong>HWID Reset For External Panel</strong><br>
                    <small>(CERT_INSTALL - MasaÃ¼stÃ¼ uygulama iÃ§in)</small>
                    <p>Kalan hak: <strong id="resetLeftExternal">2</strong>/2</p>
                    <button class="reset-btn external" onclick="requestHwidReset('external')">SÄ±fÄ±rla (External)</button>
                </div>

                <div class="reset-info" id="resetStatus"></div>
            </div>

            <!-- Ana Ä°Ã§erik Grid -->
            <div class="main-grid">
                <!-- Sol - Ã–zellikler + Ä°ndirme -->
                <div class="features-section">
                    <h2>Saho V5 Black Engine Panel Ã–zellikleri</h2>
                    <ul>
                        <li>ğŸ¯ Pull Player</li>
                        <li>ğŸ†” UID Bypass</li>
                        <li>ğŸ”« Aimbot</li>
                        <li>âš¡ Fast Switch</li>
                        <li>âŒ¨ï¸ Macro</li>
                        <li>ğŸ‘ï¸ Hex Esp MenÃ¼</li>
                        <li>ğŸŒˆ Chams MenÃ¼</li>
                    </ul>
                    <div class="download-note">GÃ¼venle indirip hemen kullanmaya baÅŸla!</div>
                    <button class="download-btn" onclick="window.open('https://www.mediafire.com/file/n1iluvg1c7znl1h/SAHO+SERVER.rar/file', '_blank')">
                        ğŸ“¥ SAHO V5 BLACK ENGINE Ä°NDÄ°R
                    </button>
                </div>

                <!-- Orta - Hesap Bilgileri -->
                <div class="account-info">
                    <h2>ğŸ‘¤ Hesap Bilgileri</h2>
                    <div id="info"></div>
                    <div id="playerId"></div>
                    <div id="username"></div>
                    <div id="level"></div>
                    <div id="region"></div>
                    <div id="ban"></div>
                    <div id="createDate"></div>
                    <div id="language"></div>
                    <div class="infoBox" id="extraInfo"></div>
                </div>

                <!-- SaÄŸ - YÄ±ldÄ±z Hesaplama (kÄ±saltÄ±lmÄ±ÅŸ) -->
                <div id="questionPanel">
                    <div id="q1">
                        <p>ğŸ“Š Åu an hesabÄ±nÄ±z kaÃ§ yÄ±ldÄ±z?</p>
                        <input type="number" id="starNowInput" min="50" max="999">
                        <button onclick="next1()">Devam</button>
                        <div class="warning">
                            âš ï¸ 55 yÄ±ldÄ±zÄ±n Ã¼stÃ¼ incelemeye alÄ±nÄ±r!<br>
                            BR'de max 20 kill, Ã¼st Ã¼ste 16 kill alma!<br>
                            Ortalama 8-13 kill arasÄ± tutmaya Ã§alÄ±ÅŸÄ±n...
                        </div>
                    </div>
                    <!-- q2 ve q3 burada olmalÄ± ama sen kÄ±saltmÄ±ÅŸtÄ±n, istersen tam halini ekleriz -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const API = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
        let mainKey = "";
        let resetCountWeb = 0;
        let resetCountExternal = 0;
        const MAX_RESET = 2;

        function hwid() {
            return btoa(navigator.userAgent + screen.width + screen.height + navigator.language);
        }

        async function login() {
            mainKey = document.getElementById("keyInput").value.trim();
            const status = document.getElementById("loginStatus");
            status.classList.add("hidden");
            status.innerText = "";

            if (!mainKey) {
                status.innerText = "âŒ Key boÅŸ olamaz!";
                status.classList.remove("hidden");
                return;
            }

            document.getElementById("loginCard").classList.add("hidden");
            document.getElementById("dashboard").classList.remove("hidden");
            document.getElementById("loading").classList.remove("hidden");

            await new Promise(r => setTimeout(r, 3000));
            document.getElementById("loading").classList.add("hidden");

            try {
                const r = await fetch(API + "/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ key: mainKey, hwid: hwid() })
                });

                const d = await r.json();

                if (!d.ok) {
                    document.getElementById("dashboard").classList.add("hidden");
                    document.getElementById("loginCard").classList.remove("hidden");
                    status.innerText = "âŒ " + (d.message || "GeÃ§ersiz Key veya HWID uyuÅŸmazlÄ±ÄŸÄ±");
                    status.classList.remove("hidden");
                    return;
                }

                // Reset sayaÃ§larÄ±nÄ± sunucudan al
                resetCountWeb = d.resetCountWeb || 0;
                resetCountExternal = d.resetCountExternal || 0;

                updateResetDisplay();

                document.getElementById("dashboardContent").classList.remove("hidden");

                document.getElementById("info").innerText = d.info || "HoÅŸ geldin!";
                document.getElementById("playerId").innerText = "Oyuncu ID: " + (d.playerId || "Bilinmiyor");
                document.getElementById("username").innerText = "KullanÄ±cÄ±: " + (d.username || "Bilinmiyor");
                document.getElementById("level").innerText = "Level: " + (d.level || "Bilinmiyor");
                document.getElementById("region").innerText = "Region: " + (d.region || "Bilinmiyor");
                document.getElementById("ban").innerText = "Ban durumu: " + (d.banStatus || "Yok");
                document.getElementById("createDate").innerText = "Kurulum tarihi: " + (d.createTime || "Bilinmiyor");
                document.getElementById("language").innerText = "Language: " + (d.language || "TÃ¼rkÃ§e");

                const ip = await fetch('https://api.ipify.org?format=json').then(r => r.json()).then(d => d.ip).catch(() => "Bilinmiyor");
                document.getElementById("extraInfo").innerText = `IP: ${ip}\nTarayÄ±cÄ±: ${navigator.userAgent}\nSaat: ${new Date().toLocaleString('tr-TR')}`;
            } catch (err) {
                document.getElementById("dashboard").classList.add("hidden");
                document.getElementById("loginCard").classList.remove("hidden");
                status.innerText = "Sunucu baÄŸlantÄ±sÄ± kurulamadÄ± ğŸŒ";
                status.classList.remove("hidden");
                console.error(err);
            }
        }

        function updateResetDisplay() {
            document.getElementById("resetLeftWeb").innerText = MAX_RESET - resetCountWeb;
            document.getElementById("resetLeftExternal").innerText = MAX_RESET - resetCountExternal;

            const status = document.getElementById("resetStatus");

            if (resetCountWeb >= MAX_RESET && resetCountExternal >= MAX_RESET) {
                status.innerHTML = `Her iki reset hakkÄ± da doldu.<br>3. sÄ±fÄ±rlama iÃ§in UID: <strong>7442955706</strong> 'e <strong>200</strong> elmas gÃ¶nderin!`;
                status.style.color = "#ff1f4c";
            } else {
                status.innerHTML = "";
            }
        }

        async function requestHwidReset(type) {
            const count = type === 'web' ? resetCountWeb : resetCountExternal;
            if (count >= MAX_RESET) {
                alert(`[${type.toUpperCase()}] Ãœcretsiz reset hakkÄ±n kalmadÄ±!`);
                return;
            }

            if (!confirm(`[${type.toUpperCase()}] HWID sÄ±fÄ±rlamak istediÄŸine emin misin?`)) return;

            const status = document.getElementById("resetStatus");
            status.innerHTML = `[${type.toUpperCase()}] SÄ±fÄ±rlama iÅŸlemi baÅŸlatÄ±lÄ±yor...`;

            try {
                const res = await fetch(API + "/hwid-reset", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        key: mainKey,
                        current_hwid: hwid(),
                        type: type
                    })
                });

                const data = await res.json();

                if (data.success) {
                    if (type === 'web') {
                        resetCountWeb++;
                    } else {
                        resetCountExternal++;
                    }

                    status.innerHTML = `âœ… [${type.toUpperCase()}] HWID baÅŸarÄ±yla sÄ±fÄ±rlandÄ±!<br>Kalan hak: ${MAX_RESET - (type === 'web' ? resetCountWeb : resetCountExternal)}`;
                    updateResetDisplay();

                    // Ä°stersen otomatik sayfa yenileme
                    // setTimeout(() => location.reload(), 2500);
                } else {
                    status.innerHTML = "âŒ " + (data.message || "Ä°ÅŸlem baÅŸarÄ±sÄ±z");
                    status.style.color = "#ff1f4c";
                }
            } catch (err) {
                status.innerHTML = "âš ï¸ Sunucu ile iletiÅŸim kurulamadÄ±";
                status.style.color = "#ff1f4c";
                console.error(err);
            }
        }

        // YÄ±ldÄ±z hesaplama (kÄ±saltÄ±lmÄ±ÅŸ hali - tam halini istersen eklerim)
        function next1() {
            // ... devamÄ±
        }
    </script>
</body>
</html>
