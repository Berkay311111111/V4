<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Saho Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; 
  --card:#111827; 
  --acc:#22c55e; 
  --warn:#f59e0b; 
  --err:#ef4444; 
  --txt:#e5e7eb;
  --shadow:0 15px 40px rgba(0,0,0,0.6);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter}
body{
  background:var(--bg);
  color:var(--txt);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
}

.center{
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  width:100%;
  transition:all .3s;
}

.card{
  width:min(480px,90vw);
  background:linear-gradient(135deg,#111827,#1c1f2a);
  border-radius:20px;
  padding:30px;
  box-shadow:var(--shadow);
  margin:15px 0;
  transition:all .3s;
  text-align:center;
}

h1,h2{margin:.3em 0;font-weight:800}

input,select,button{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  margin:10px 0;
  font-size:16px;
}

button{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  font-weight:800;
  cursor:pointer;
  transition:.3s;
}

button:hover{opacity:.9}

.hidden{display:none}

#loadingAnim{
  width:80px;
  height:80px;
  border:8px solid rgba(255,255,255,.2);
  border-top:8px solid #22c55e;
  border-radius:50%;
  animation:spin 1.5s linear infinite;
  margin:20px auto;
}

@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

.info-box{
  background:#1f2937;
  padding:15px;
  border-radius:12px;
  margin-top:15px;
}

.info-box p{margin:6px 0;font-size:15px}

.links{
  display:flex;
  justify-content:center;
  gap:15px;
  margin-top:10px;
}

.links a img{width:40px;height:40px;transition:.3s}
.links a img:hover{transform:scale(1.1)}

input, select{background:#1a1f2d;color:#e5e7eb;}
select option{background:#111827;color:#fff;}

.card, .info-box{
  animation:fadeIn 0.5s ease forwards;
  opacity:0;
}

@keyframes fadeIn{
  to{opacity:1;}
}
</style>
</head>
<body>

<div class="topbar hidden" id="alertTop"></div>

<!-- LOGIN -->
<div class="center" id="loginScreen">
  <div class="card" style="opacity:1;">
    <h1>License Kontrol</h1>
    <input id="key" placeholder="License Key (√ñrn: BLA BLA BLA)">
    <button onclick="startLogin()">Giri≈ü Yap</button>
    <div id="loginStatus" style="margin-top:12px;min-height:20px;"></div>
  </div>
</div>

<!-- LOADING ANIMATION -->
<div class="center hidden" id="loadingScreen">
  <div id="loadingAnim"></div>
  <h2>Kontrol ediliyor...</h2>
</div>

<!-- PANEL -->
<div class="center hidden" id="panelScreen">
  <div class="card" style="opacity:1;">
    <h1 id="welcomeText">Ho≈ügeldin!</h1>
    <div class="info-box" style="opacity:1;">
      <p id="keyInfo"></p>
      <p id="expiryInfo"></p>
      <div class="links">
        <a href="#" target="_blank" id="instaLink"><img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Instagram_logo_2022.svg"></a>
        <a href="#" target="_blank" id="discordLink"><img src="https://upload.wikimedia.org/wikipedia/commons/4/47/Discord_logo_%282019%29.svg"></a>
      </div>
    </div>

    <!-- Soru 1 -->
    <div class="card" id="q1" style="opacity:1;">
      <h2>Oyunda toplam ka√ß yƒ±ldƒ±zƒ±n var? (0-999)</h2>
      <input type="number" id="totalStars" min="0" max="999">
      <button onclick="submitTotalStars()">G√∂nder</button>
      <div id="totalStarsStatus"></div>
    </div>

    <!-- Soru 2 -->
    <div class="card hidden" id="q2">
      <h2>Bug√ºn ka√ß yƒ±ldƒ±z kastƒ±n? (0-55)</h2>
      <input type="number" id="todayStars" min="0" max="55">
      <button onclick="submitTodayStars()">G√∂nder</button>
      <div id="todayStarsStatus"></div>
    </div>

    <!-- Soru 3 -->
    <div class="card hidden" id="q3">
      <h2>Panelde hangi √∂zellikleri kullandƒ±n / kullanacaksƒ±n?</h2>
      <select id="featureSelect" multiple size="5">
        <option>Chams</option>
        <option>Aimbot</option>
        <option>Fast switch</option>
        <option>Hex Macro</option>
        <option>UID Bypass</option>
      </select>
      <button onclick="submitFeatures()">G√∂nder</button>
      <div id="featureStatus"></div>
    </div>

    <div class="card info-box hidden" id="finalInfo"></div>
  </div>
</div>

<script>
const API_URL = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
let currentKey = "";
let maxStars = 55;
let totalStarsVal = 0;
let todayStarsVal = 0;
let featuresSelected = [];

function getHWID(){
  return btoa(navigator.userAgent+screen.width+screen.height+navigator.language+Intl.DateTimeFormat().resolvedOptions().timeZone);
}

// LOGIN
async function startLogin(){
  const key = document.getElementById("key").value.trim();
  const status = document.getElementById("loginStatus");
  if(!key){ status.innerText="‚ùå Key bo≈ü"; return; }
  status.innerText="Kontrol ediliyor...";
  try{
    const res = await fetch(API_URL+"/login",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({key:key, hwid:getHWID()})
    });
    const data = await res.json();
    if(!data.ok){ status.innerText="‚ùå "+data.message; return; }
    currentKey = key;
    showLoading(data);
  }catch(e){
    status.innerText="üåê Sunucuya baƒülanƒ±lamƒ±yor";
  }
}

// LOADING ANIMATION
function showLoading(data){
  document.getElementById("loginScreen").classList.add("hidden");
  const loadScreen = document.getElementById("loadingScreen");
  loadScreen.classList.remove("hidden");

  setTimeout(()=>{ 
    loadScreen.classList.add("hidden");
    showPanel(data);
  },7000);
}

// PANEL
function showPanel(data){
  const panel = document.getElementById("panelScreen");
  panel.classList.remove("hidden");
  document.getElementById("welcomeText").innerText = "Ho≈ügeldin "+data.info.split(":")[1].trim();
  document.getElementById("keyInfo").innerText = data.info;
  document.getElementById("expiryInfo").innerText = "Biti≈ü Tarihi: "+new Date(data.expiresAt).toLocaleString();
  document.getElementById("instaLink").href = data.instagram;
  document.getElementById("discordLink").href = data.discord;
}

// SORU 1
function submitTotalStars(){
  const val = parseInt(document.getElementById("totalStars").value);
  const status = document.getElementById("totalStarsStatus");
  if(isNaN(val) || val<0){ status.innerText="‚ùå Ge√ßersiz deƒüer"; return; }
  totalStarsVal = val;
  status.innerText="‚úî Toplam yƒ±ldƒ±z kaydedildi: "+totalStarsVal;

  document.getElementById("q1").classList.add("hidden");
  document.getElementById("q2").classList.remove("hidden");
}

// SORU 2
function submitTodayStars(){
  const val = parseInt(document.getElementById("todayStars").value);
  const status = document.getElementById("todayStarsStatus");
  if(isNaN(val) || val<0){ status.innerText="‚ùå Ge√ßersiz deƒüer"; return; }
  if(val>maxStars){
    const ans = confirm("‚ö† L√ºtfen Paneli kullanmayƒ± bƒ±rakƒ±n! Onaylƒ±yor musunuz?");
    if(!ans){ return; }
    status.innerText="‚ö† Limit √ºst√º yƒ±ldƒ±z girdiniz!";
    document.getElementById("todayStars").value="";
    return;
  }
  todayStarsVal = val;
  status.innerText="‚úî Bug√ºnk√º yƒ±ldƒ±z kaydedildi: "+todayStarsVal;

  document.getElementById("q2").classList.add("hidden");
  document.getElementById("q3").classList.remove("hidden");
}

// SORU 3
function submitFeatures(){
  const select = document.getElementById("featureSelect");
  const status = document.getElementById("featureStatus");
  featuresSelected = Array.from(select.selectedOptions).map(o=>o.value);
  if(featuresSelected.length==0){ status.innerText="‚ùå √ñzellik se√ßmediniz"; return; }
  status.innerText="‚úî Se√ßilen √ñzellikler: "+featuresSelected.join(", ");

  const final = document.getElementById("finalInfo");
  final.innerHTML = `<h2>Bug√ºnk√º Bilgiler</h2>
    <p>Toplam Yƒ±ldƒ±z: ${totalStarsVal}</p>
    <p>Bug√ºn Kastƒ±ƒüƒ±nƒ±z: ${todayStarsVal}</p>
    <p>Max Kasabileceƒüiniz Limit: ${maxStars}</p>
    <p>Se√ßilen √ñzellikler: ${featuresSelected.join(", ")}</p>`;
  final.classList.remove("hidden");
  document.getElementById("q3").classList.add("hidden");
}
</script>

</body>
</html>
