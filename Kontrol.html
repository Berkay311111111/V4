<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Saho Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; --card:#111827; --acc:#22c55e; --warn:#f59e0b; --err:#ef4444; --txt:#e5e7eb;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter}
body{background:var(--bg);color:var(--txt)}
.center{display:flex;align-items:center;justify-content:center;min-height:100vh;flex-direction:column}
.card{width:min(460px,90vw);background:var(--card);border-radius:18px;padding:25px;box-shadow:0 25px 60px rgba(0,0,0,.5)}
h1,h2{margin:.2em 0}
input,select,button{width:100%;padding:12px;border-radius:12px;border:none;margin:8px 0}
button{background:linear-gradient(135deg,#22c55e,#16a34a);color:#02110a;font-weight:800;cursor:pointer;transition:.3s}
button:hover{opacity:.9}
.hidden{display:none}
.topbar{position:fixed;top:0;left:0;right:0;padding:10px;text-align:center;font-weight:800;z-index:5}
.topbar.warn{background:linear-gradient(90deg,#f59e0b,#fbbf24);color:#1f1300}
.topbar.err{background:linear-gradient(90deg,#ef4444,#f87171);color:#fff}
#loadingAnim{width:80px;height:80px;border:8px solid rgba(255,255,255,.2);border-top:8px solid #22c55e;border-radius:50%;animation:spin 1.5s linear infinite;margin:20px auto}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
.info-box{background:#1f2937;padding:15px;border-radius:12px;margin-top:15px;}
.info-box p{margin:5px 0}
.links{display:flex;justify-content:space-between;margin-top:10px}
.links a img{width:40px;height:40px}
</style>
</head>
<body>

<div class="topbar hidden" id="alertTop"></div>

<div class="center" id="loginScreen">
  <div class="card">
    <h1>License Kontrol</h1>
    <input id="key" placeholder="License Key (√ñrn: UMUT-DUUHED)">
    <button onclick="startLogin()">Giri≈ü Yap</button>
    <div id="loginStatus" style="margin-top:12px;min-height:20px;"></div>
  </div>
</div>

<div class="center hidden" id="loadingScreen">
  <div id="loadingAnim"></div>
  <h2>Kontrol ediliyor...</h2>
</div>

<div class="center hidden" id="panelScreen">
  <div class="card">
    <h1 id="welcomeText">Ho≈ügeldin!</h1>
    <div class="info-box">
      <p id="keyInfo"></p>
      <p id="expiryInfo"></p>
      <div class="links">
        <a href="#" target="_blank" id="instaLink"><img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Instagram_logo_2022.svg"></a>
        <a href="#" target="_blank" id="discordLink"><img src="https://upload.wikimedia.org/wikipedia/commons/4/47/Discord_logo_%282019%29.svg"></a>
      </div>
    </div>
    <div class="card" style="margin-top:15px;">
      <h2>Bug√ºn ka√ß yƒ±ldƒ±z kastƒ±n? (0-55)</h2>
      <input type="number" id="starInput" min="0" max="55">
      <button onclick="submitStar()">G√∂nder</button>
      <div id="starStatus" style="margin-top:10px;"></div>
    </div>
    <div class="card" style="margin-top:15px;">
      <h2>Panelde hangi √∂zellikleri kullandƒ±n / kullanacaksƒ±n?</h2>
      <select id="featureSelect" multiple>
        <option>Chams</option>
        <option>Aimbot</option>
        <option>Fast switch</option>
        <option>Hex Macro</option>
        <option>UID Bypass</option>
      </select>
      <button onclick="submitFeatures()">G√∂nder</button>
      <div id="featureStatus" style="margin-top:10px"></div>
    </div>
    <div id="finalInfo" class="info-box hidden"></div>
  </div>
</div>

<script>
const API_URL = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
let currentKey = "";
let maxStars = 55; // default limit

function getHWID(){
  return btoa(navigator.userAgent+screen.width+screen.height+navigator.language+Intl.DateTimeFormat().resolvedOptions().timeZone);
}

async function startLogin(){
  const key = document.getElementById("key").value.trim();
  const status = document.getElementById("loginStatus");
  if(!key){ status.innerText="‚ùå Key bo≈ü"; return; }
  status.innerText="Kontrol ediliyor...";
  try{
    const res = await fetch(API_URL+"/login",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({key:key, hwid:getHWID()})
    });
    const data = await res.json();
    if(!data.ok){ status.innerText="‚ùå "+data.message; return; }
    currentKey = key;
    showLoading(data);
  }catch(e){
    status.innerText="üåê Sunucuya baƒülanƒ±lamƒ±yor";
  }
}

function showLoading(data){
  document.getElementById("loginScreen").classList.add("hidden");
  const loadScreen = document.getElementById("loadingScreen");
  loadScreen.classList.remove("hidden");

  setTimeout(()=>{ // 7 saniye animasyon
    loadScreen.classList.add("hidden");
    showPanel(data);
  },7000);
}

function showPanel(data){
  const panel = document.getElementById("panelScreen");
  panel.classList.remove("hidden");
  document.getElementById("welcomeText").innerText = "Ho≈ügeldin "+data.info.split(":")[1].trim();
  document.getElementById("keyInfo").innerText = data.info;
  document.getElementById("expiryInfo").innerText = "Biti≈ü Tarihi: "+new Date(data.expiresAt).toLocaleString();
  document.getElementById("instaLink").href = data.instagram;
  document.getElementById("discordLink").href = data.discord;
}

// ‚≠ê Yƒ±ldƒ±z giri≈ü
let todayStars = 0;
function submitStar(){
  const val = parseInt(document.getElementById("starInput").value);
  const status = document.getElementById("starStatus");
  if(isNaN(val) || val<0){ status.innerText="‚ùå Ge√ßersiz deƒüer"; return; }
  if(val>maxStars){
    const ans = confirm("‚ö† L√ºtfen Paneli kullanmayƒ± bƒ±rakƒ±n! Onaylƒ±yor musunuz?");
    if(!ans){ return; }
    status.innerText="‚ö† Limit √ºst√º yƒ±ldƒ±z girdiniz!";
    document.getElementById("starInput").value="";
    return;
  }
  todayStars = val;
  status.innerText="‚úî Yƒ±ldƒ±z kaydedildi: "+todayStars;
}

// üõ†Ô∏è Feature se√ßim
let featuresSelected = [];
function submitFeatures(){
  const select = document.getElementById("featureSelect");
  const status = document.getElementById("featureStatus");
  featuresSelected = Array.from(select.selectedOptions).map(o=>o.value);
  if(featuresSelected.length==0){ status.innerText="‚ùå √ñzellik se√ßmediniz"; return; }
  status.innerText="‚úî Se√ßilen √ñzellikler: "+featuresSelected.join(", ");

  // Final info g√∂ster
  const final = document.getElementById("finalInfo");
  final.innerHTML = `<h2>Bug√ºnk√º Bilgiler</h2>
  <p>Ba≈ülangƒ±√ß Yƒ±ldƒ±z: 0</p>
  <p>Bug√ºn Kastƒ±ƒüƒ±nƒ±z: ${todayStars}</p>
  <p>Bug√ºn Max Kasabileceƒüiniz Limit: ${maxStars}</p>`;
  final.classList.remove("hidden");
}
</script>
</body>
</html>
