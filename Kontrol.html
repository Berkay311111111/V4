<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Saho Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; 
  --card:#111827; 
  --acc:#22c55e; 
  --warn:#f59e0b; 
  --err:#ef4444; 
  --txt:#e5e7eb;
  --shadow:0 15px 40px rgba(0,0,0,0.6);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter}
body{
  background:var(--bg);
  color:var(--txt);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
}

.center{
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  width:100%;
  transition:all .3s;
}

.card{
  width:min(480px,90vw);
  background:linear-gradient(135deg,#111827,#1c1f2a);
  border-radius:20px;
  padding:30px;
  box-shadow:var(--shadow);
  margin:15px 0;
  transition:all .3s;
  text-align:center;
  opacity:1;
}

h1,h2{margin:.3em 0;font-weight:800}

input,select,button{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  margin:10px 0;
  font-size:16px;
}

button{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:#fff;
  font-weight:800;
  cursor:pointer;
  transition:.3s;
}

button:hover{opacity:.9}

.hidden{display:none !important;}

#loadingAnim{
  width:80px;
  height:80px;
  border:8px solid rgba(255,255,255,.2);
  border-top:8px solid #22c55e;
  border-radius:50%;
  animation:spin 1.5s linear infinite;
  margin:20px auto;
}

@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

.info-box{
  background:#1f2937;
  padding:15px;
  border-radius:12px;
  margin-top:15px;
}

.info-box p{margin:6px 0;font-size:15px}

.links{
  display:flex;
  justify-content:center;
  gap:15px;
  margin-top:10px;
}

.links a img{width:40px;height:40px;transition:.3s}
.links a img:hover{transform:scale(1.1)}

input, select{background:#1a1f2d;color:#e5e7eb;}
select option{background:#111827;color:#fff;}

/* Animations */
.fadeIn{animation:fadeIn 0.5s ease forwards;opacity:0;}
.fadeOut{animation:fadeOut 0.5s ease forwards;opacity:1;}
@keyframes fadeIn{to{opacity:1;}}
@keyframes fadeOut{to{opacity:0;}}
</style>
</head>
<body>

<div class="center" id="loginScreen">
  <div class="card">
    <h1>License Kontrol</h1>
    <input id="key" placeholder="License Key (Ã–rn: BLA BLA BLA)">
    <button onclick="startLogin()">GiriÅŸ Yap</button>
    <div id="loginStatus" style="margin-top:12px;min-height:20px;"></div>
  </div>
</div>

<div class="center hidden" id="loadingScreen">
  <div id="loadingAnim"></div>
  <h2>Kontrol ediliyor...</h2>
</div>

<div class="center hidden" id="panelScreen">
  <div class="card">
    <h1 id="welcomeText">HoÅŸgeldin!</h1>
    <div class="info-box">
      <p id="keyInfo"></p>
      <p id="expiryInfo"></p>
      <div class="links">
        <a href="#" target="_blank" id="instaLink"><img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Instagram_logo_2022.svg"></a>
        <a href="#" target="_blank" id="discordLink"><img src="https://upload.wikimedia.org/wikipedia/commons/4/47/Discord_logo_%282019%29.svg"></a>
      </div>
    </div>

    <!-- Sorular -->
    <div class="card fadeIn" id="q1">
      <h2>Oyunda toplam kaÃ§ yÄ±ldÄ±zÄ±n var? (0-999)</h2>
      <input type="number" id="totalStars" min="0" max="999">
      <button onclick="submitTotalStars()">GÃ¶nder</button>
      <div id="totalStarsStatus"></div>
    </div>

    <div class="card fadeIn hidden" id="q2">
      <h2>BugÃ¼n kaÃ§ yÄ±ldÄ±z kastÄ±n? (0-55)</h2>
      <input type="number" id="todayStars" min="0" max="55">
      <button onclick="submitTodayStars()">GÃ¶nder</button>
      <div id="todayStarsStatus"></div>
    </div>

    <div class="card fadeIn hidden" id="q3">
      <h2>Panelde hangi Ã¶zellikleri kullandÄ±n / kullanacaksÄ±n?</h2>
      <select id="featureSelect" multiple size="5">
        <option>Chams</option>
        <option>Aimbot</option>
        <option>Fast switch</option>
        <option>Hex Macro</option>
        <option>UID Bypass</option>
      </select>
      <button onclick="submitFeatures()">GÃ¶nder</button>
      <div id="featureStatus"></div>
    </div>

    <div class="card info-box fadeIn hidden" id="finalInfo"></div>
  </div>
</div>

<script>
const API_URL = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
let currentKey = "";
let maxStars = 55;
let totalStarsVal = 0;
let todayStarsVal = 0;
let featuresSelected = [];

function getHWID(){
  return btoa(navigator.userAgent+screen.width+screen.height+navigator.language+Intl.DateTimeFormat().resolvedOptions().timeZone);
}

async function startLogin(){
  const key = document.getElementById("key").value.trim();
  const status = document.getElementById("loginStatus");
  if(!key){ status.innerText="âŒ Key boÅŸ"; return; }
  status.innerText="Kontrol ediliyor...";
  try{
    const res = await fetch(API_URL+"/login",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({key:key, hwid:getHWID()})
    });
    const data = await res.json();
    if(!data.ok){ status.innerText="âŒ "+data.message; return; }
    currentKey = key;
    showLoading(data);
  }catch(e){
    status.innerText="ðŸŒ Sunucuya baÄŸlanÄ±lamÄ±yor";
  }
}

function showLoading(data){
  document.getElementById("loginScreen").classList.add("hidden");
  const loadScreen = document.getElementById("loadingScreen");
  loadScreen.classList.remove("hidden");

  setTimeout(()=>{ 
    loadScreen.classList.add("hidden");
    showPanel(data);
  },2000); // animasyon daha hÄ±zlÄ±
}

function showPanel(data){
  const panel = document.getElementById("panelScreen");
  panel.classList.remove("hidden");
  document.getElementById("welcomeText").innerText = "HoÅŸgeldin "+data.info.split(":")[1].trim();
  document.getElementById("keyInfo").innerText = data.info;
  document.getElementById("expiryInfo").innerText = "BitiÅŸ Tarihi: "+new Date(data.expiresAt).toLocaleString();
  document.getElementById("instaLink").href = data.instagram;
  document.getElementById("discordLink").href = data.discord;
}

// Sorular step by step
function nextQuestion(currentId, nextId){
  const current = document.getElementById(currentId);
  const next = document.getElementById(nextId);
  current.classList.add("fadeOut");
  setTimeout(()=>{
    current.classList.add("hidden");
    current.classList.remove("fadeOut");
    next.classList.remove("hidden");
    next.classList.add("fadeIn");
  },500);
}

// Soru 1
function submitTotalStars(){
  const val = parseInt(document.getElementById("totalStars").value);
  const status = document.getElementById("totalStarsStatus");
  if(isNaN(val) || val<0){ status.innerText="âŒ GeÃ§ersiz deÄŸer"; return; }
  totalStarsVal = val;
  status.innerText="âœ” Toplam yÄ±ldÄ±z kaydedildi: "+totalStarsVal;
  nextQuestion("q1","q2");
}

// Soru 2
function submitTodayStars(){
  const val = parseInt(document.getElementById("todayStars").value);
  const status = document.getElementById("todayStarsStatus");
  if(isNaN(val) || val<0){ status.innerText="âŒ GeÃ§ersiz deÄŸer"; return; }
  if(val>maxStars){
    const ans = confirm("âš  LÃ¼tfen Paneli kullanmayÄ± bÄ±rakÄ±n! OnaylÄ±yor musunuz?");
    if(!ans){ return; }
    status.innerText="âš  Limit Ã¼stÃ¼ yÄ±ldÄ±z girdiniz!";
    document.getElementById("todayStars").value="";
    return;
  }
  todayStarsVal = val;
  status.innerText="âœ” BugÃ¼nkÃ¼ yÄ±ldÄ±z kaydedildi: "+todayStarsVal;
  nextQuestion("q2","q3");
}

// Soru 3
function submitFeatures(){
  const select = document.getElementById("featureSelect");
  const status = document.getElementById("featureStatus");
  featuresSelected = Array.from(select.selectedOptions).map(o=>o.value);
  if(featuresSelected.length==0){ status.innerText="âŒ Ã–zellik seÃ§mediniz"; return; }
  status.innerText="âœ” SeÃ§ilen Ã–zellikler: "+featuresSelected.join(", ");

  document.getElementById("q3").classList.add("fadeOut");
  setTimeout(()=>{
    document.getElementById("q3").classList.add("hidden");
    document.getElementById("q3").classList.remove("fadeOut");
    const final = document.getElementById("finalInfo");
    final.innerHTML = `<h2>BugÃ¼nkÃ¼ Bilgiler</h2>
      <p>Toplam YÄ±ldÄ±z: ${totalStarsVal}</p>
      <p>BugÃ¼n KastÄ±ÄŸÄ±nÄ±z: ${todayStarsVal}</p>
      <p>Max KasabileceÄŸiniz Limit: ${maxStars}</p>
      <p>SeÃ§ilen Ã–zellikler: ${featuresSelected.join(", ")}</p>`;
    final.classList.remove("hidden");
    final.classList.add("fadeIn");
  },500);
}
</script>

</body>
</html>
