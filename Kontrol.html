<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAHO TITAN ENGINE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <script>
        // â”€â”€â”€ BURAYI Ä°STEDÄ°ÄÄ°N ZAMAN DEÄÄ°ÅTÄ°R â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const API_BASE = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
        // Yeni link gelirse buraya yapÄ±ÅŸtÄ±r aga
    </script>

    <style>
        :root {
            --bg: #0a0b0f; --card: #171926; --primary: #00f0ff; --secondary: #ff00f5;
            --glow: rgba(0,240,255,0.6); --text: #e0f7ff; --err: #ff3366; --acc: #22c55e; --warn: #f59e0b;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            min-height:100vh; background:linear-gradient(135deg,#0a0b0f 0%,#1a0033 100%);
            color:var(--text); font-family:'Inter',sans-serif; background-attachment:fixed;
        }
        .container { display:flex; justify-content:center; align-items:flex-start; min-height:100vh; padding:40px 20px; }
        .card {
            background:rgba(23,25,38,0.92); backdrop-filter:blur(14px); border-radius:24px; padding:45px;
            width:100%; max-width:1200px; box-shadow:0 0 100px rgba(0,240,255,0.4);
            border:1px solid rgba(0,240,255,0.3);
        }
        h1 {
            font-family:'Orbitron',sans-serif; font-size:3.6rem;
            background:linear-gradient(90deg,var(--primary),var(--secondary)); -webkit-background-clip:text; background-clip:text;
            color:transparent; text-align:center; margin-bottom:40px; text-shadow:0 0 40px var(--glow); letter-spacing:4px;
        }
        #loginCard { max-width:520px; text-align:center; }
        #keyInput {
            width:100%; padding:20px 30px; background:rgba(10,11,15,0.85); border:1px solid rgba(0,240,255,0.45);
            border-radius:16px; color:white; font-size:1.3rem; text-align:center; margin:30px 0; letter-spacing:3px;
        }
        #loginBtn {
            width:100%; padding:22px; background:linear-gradient(135deg,var(--primary),var(--secondary)); border:none;
            border-radius:16px; color:black; font-weight:900; font-size:1.5rem; cursor:pointer; transition:all .4s;
            box-shadow:0 0 40px rgba(0,240,255,0.7);
        }
        #loginBtn:hover { transform:translateY(-5px); box-shadow:0 0 60px rgba(0,240,255,0.9); }
        #loginStatus { margin-top:30px; font-size:1.2rem; min-height:30px; color:var(--err); text-shadow:0 0 12px rgba(255,51,102,0.8); }
        .test-box { margin:25px 0; padding:18px; background:rgba(0,240,255,0.12); border-radius:14px; text-align:center; }
        .test-btn { padding:12px 28px; background:var(--primary); color:#000; border:none; border-radius:12px; font-weight:bold; cursor:pointer; }
        .hidden { display:none !important; }

        /* â”€â”€â”€ AÅŸaÄŸÄ±daki stilleri orijinal kodundan direkt kopyala (Ã§ok uzun diye burada kÄ±salttÄ±m) â”€â”€â”€ */
        .announcement { background:rgba(34,197,94,0.2); border:1px solid var(--acc); color:var(--acc); padding:20px; border-radius:16px; text-align:center; font-weight:bold; font-size:1.3rem; margin-bottom:40px; }
        .key-display { background:rgba(0,240,255,0.15); border:1px solid var(--primary); border-radius:18px; padding:35px; margin:35px 0; text-align:center; }
        .key-display h3 { color:var(--primary); margin-bottom:20px; font-size:1.8rem; }
        .key-display strong { font-size:2.8rem; letter-spacing:5px; color:var(--primary); }
        .reset-section, .reset-box, .main-grid, .section-title, .features-list, .download-btn, .warning { /* orijinal stiller aynÄ± kalÄ±yor */ }
    </style>
</head>
<body>

<div class="container">

    <!-- GÄ°RÄ°Å EKRANI -->
    <div class="card" id="loginCard">
        <h1>SAHO TITAN ENGINE</h1>

        <div class="test-box">
            <button class="test-btn" onclick="testApi()">Sunucu Durumunu Test Et</button>
            <div id="testResult" style="margin-top:15px; font-weight:bold; min-height:40px;"></div>
        </div>

        <input id="keyInput" type="text" placeholder="Lisans Key Girin">
        <button id="loginBtn" onclick="login()">GiriÅŸ Yap</button>
        <div id="loginStatus"></div>
    </div>

    <!-- DASHBOARD - orijinal tasarÄ±m tamamen aynÄ± -->
    <div class="card hidden" id="dashboard">
        <h1>HOÅ GELDÄ°N AGA</h1>

        <div class="key-display">
            <h3>EXTERNAL PANEL GÄ°RÄ°Å KEYÄ°NÄ°Z</h3>
            <strong id="externalKeyDisplay">HenÃ¼z oluÅŸturulmadÄ±...</strong><br>
            <small>(Form2'ye sadece bu 8 haneli kÄ±smÄ± girin)</small>
        </div>

        <div class="announcement">
            TÃ¼m Ã¶zellikler %100 gÃ¼venli! ğŸš€ Keyini iyi kullan aga
        </div>

        <!-- HWID Reset bÃ¶lÃ¼mÃ¼ aynÄ± -->
        <div class="reset-section">
            <h3>HWID Reset SeÃ§enekleri</h3>
            <!-- ... kalan reset-box kÄ±sÄ±mlarÄ± orijinalden aynÄ± ... -->
        </div>

        <!-- Main grid, Ã¶zellikler, indirme, hesap bilgileri, yÄ±ldÄ±z hesaplama â†’ hepsi orijinal haliyle aynÄ± kalÄ±yor -->
        <!-- (Yer tasarrufu iÃ§in burada tekrar yazmÄ±yorum, sen Ã¶nceki kodundan kopyala-yapÄ±ÅŸtÄ±r yapabilirsin) -->
    </div>
</div>

<script>
// HWID hesaplama (deÄŸiÅŸmedi)
function hwid() {
    return btoa(navigator.userAgent + screen.width + screen.height + navigator.language);
}

// Sunucu testi (ngrok uyarÄ±sÄ±nÄ± da yakalamaya Ã§alÄ±ÅŸÄ±yor)
async function testApi() {
    const resEl = document.getElementById("testResult");
    resEl.innerHTML = "Test ediliyor... (5-10 saniye bekle)";

    try {
        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 10000);

        const res = await fetch(API_BASE, { 
            method: 'GET', 
            mode: 'cors', 
            signal: controller.signal 
        });
        
        clearTimeout(timeout);
        
        if (res.status >= 200 && res.status < 300) {
            const text = await res.text();
            if (text.includes("ngrok") || text.includes("ERR_NGROK")) {
                resEl.innerHTML = "âš ï¸ Ngrok gÃ¼venlik sayfasÄ± Ã§Ä±kÄ±yor<br>Sunucu canlÄ± ama normal login bÃ¼yÃ¼k ihtimal Ã§alÄ±ÅŸmaz";
                resEl.style.color = "var(--warn)";
            } else {
                resEl.innerHTML = "âœ… Sunucu yanÄ±t veriyor (normal gibi gÃ¶rÃ¼nÃ¼yor)";
                resEl.style.color = "var(--acc)";
            }
        } else {
            resEl.innerHTML = `âŒ Sunucu hata verdi (status: ${res.status})`;
            resEl.style.color = "var(--err)";
        }
    } catch (err) {
        if (err.name === 'AbortError') {
            resEl.innerHTML = "â³ Ã‡ok yavaÅŸ veya hiÃ§ yanÄ±t yok";
        } else {
            resEl.innerHTML = "âŒ BaÄŸlantÄ± tamamen baÅŸarÄ±sÄ±z<br>Ya sunucu kapalÄ± ya da ngrok Ã¶ldÃ¼";
        }
        resEl.style.color = "var(--err)";
        console.error(err);
    }
}

async function login() {
    const status = document.getElementById("loginStatus");
    const key = document.getElementById("keyInput").value.trim();

    if (!key) {
        status.innerText = "Key boÅŸ bÄ±rakma aga!";
        return;
    }

    status.innerText = "BaÄŸlanÄ±yor... (ngrok yÃ¼zÃ¼nden 10-20 sn sÃ¼rebilir)";

    try {
        const res = await fetch(API_BASE + "/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ key, hwid: hwid() })
        });

        let data;
        try {
            data = await res.json();
        } catch {
            status.innerText = "Sunucudan dÃ¼zgÃ¼n cevap gelmedi (ngrok engelliyor olabilir)";
            return;
        }

        if (!data.ok) {
            status.innerText = data.message || "Key geÃ§ersiz veya HWID eÅŸleÅŸmedi";
            return;
        }

        status.innerText = "GiriÅŸ baÅŸarÄ±lÄ±! Dashboard'a geÃ§iliyor...";
        status.style.color = "var(--acc)";

        // Buradan sonrasÄ± orijinal login mantÄ±ÄŸÄ±n aynÄ± (external key, reset haklarÄ±, hesap bilgileri vs.)
        // Sen Ã¶nceki kodundan kopyalayÄ±p buraya yapÄ±ÅŸtÄ±rabilirsin

        setTimeout(() => {
            document.getElementById("loginCard").classList.add("hidden");
            document.getElementById("dashboard").classList.remove("hidden");
        }, 1800);

    } catch (err) {
        status.innerText = "BaÄŸlantÄ± hatasÄ±!\nMuhtemel sebep: ngrok gÃ¼venlik duvarÄ±\nYeni link lazÄ±m aga";
        console.error(err);
    }
}

// DiÄŸer fonksiyonlar (requestHwidReset, next1, next2, window.onload) â†’ orijinal halinden aynÄ± kalÄ±yor
</script>
</body>
</html>
