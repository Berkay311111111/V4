<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>License Login</title>

<style>
body {
    background:#0f172a;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:Arial;
}
.box {
    background:#020617;
    padding:30px;
    border-radius:10px;
    width:300px;
    text-align:center;
}
input,button {
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:5px;
    border:none;
}
button {
    background:#22c55e;
    font-weight:bold;
    cursor:pointer;
}
#status { margin-top:10px; }
.error { color:#f87171 }
.success { color:#4ade80 }
</style>
</head>

<body>
<div class="box">
    <h2>License Login</h2>
    <input id="key" placeholder="License Key">
    <button onclick="login()">Giriş Yap</button>
    <div id="status"></div>
</div>

<script>
const API_URL = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";

// fingerprint (hwid)
function getHWID() {
    return btoa(
        navigator.userAgent +
        screen.width + screen.height +
        navigator.language +
        Intl.DateTimeFormat().resolvedOptions().timeZone
    );
}

async function login() {
    const key = document.getElementById("key").value;
    const status = document.getElementById("status");

    if (!key) {
        status.className="error";
        status.innerText="Key boş";
        return;
    }

    status.innerText="Kontrol ediliyor...";

    try {
        const res = await fetch(API_URL + "/login", {
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body:JSON.stringify({
                key:key,
                hwid:getHWID()
            })
        });

        const data = await res.json();

        if (!data.ok) {
            status.className="error";
            status.innerText=data.message;
            return;
        }

        status.className="success";
        status.innerText=data.message;

    } catch {
        status.className="error";
        status.innerText="Sunucuya bağlanılamıyor";
    }
}
</script>
</body>
</html>
