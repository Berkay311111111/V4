<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Saho Secure Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0c10;
            --card: #1f1f2e;
            --primary: #00fff7;
            --secondary: #ff00f7;
            --acc: #22c55e;
            --warn: #f59e0b;
            --err: #ff1f4c;
            --txt: #e5e7eb;
        }
        * {
            box-sizing: border-box;
            font-family: Inter, sans-serif;
        }
        body {
            margin: 0;
            background: var(--bg);
            color: var(--txt);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .card {
            background: linear-gradient(135deg, #1f1f2e, #2c2c3a);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0, 255, 255, .3), 0 0 40px rgba(255, 0, 255, .2);
            width: 100%;
            max-width: 1000px;
        }
        h1, h2, h3 {
            color: var(--primary);
            text-align: center;
        }
        .hidden {
            display: none;
        }
        input, button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            margin-top: 10px;
            font-size: 16px;
            background: #111827;
            color: var(--txt);
        }
        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover {
            opacity: 0.8;
        }
        .reset-section {
            background: rgba(245, 158, 11, 0.12);
            border: 1px solid rgba(245, 158, 11, 0.4);
            border-radius: 12px;
            padding: 18px;
            margin: 25px 0;
        }
        .reset-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            font-size: 17px;
            margin-top: 12px;
        }
        .reset-info {
            font-size: 14px;
            margin-top: 10px;
            color: #f59e0b;
            text-align: center;
        }
        .warning {
            background: rgba(255, 31, 76, 0.1);
            color: #ff1f4c;
            border: 1px solid #ff1f4c;
            border-radius: 12px;
            padding: 15px;
            margin-top: 12px;
            font-size: 14px;
            text-align: center;
            font-weight: 700;
            line-height: 1.4;
        }
        /* ... geri kalan stiller aynÄ± kaldÄ± ... */
    </style>
</head>
<body>
    <!-- LOGIN EKRANI (deÄŸiÅŸmedi) -->
    <div class="card" id="loginCard">
        <h1>ğŸŒ SAHO TITAN ENGINE</h1>
        <input id="keyInput" placeholder="License Key">
        <button onclick="login()">GiriÅŸ Yap</button>
        <div id="loginStatus" class="infoBox hidden"></div>
    </div>

    <!-- DASHBOARD -->
    <div class="card hidden" id="dashboard">
        <h1>Saho V5 Black Engine</h1>
        <div id="loading" class="hidden">
            <div class="spinner"></div>
            <p>SAHO TITAN ENGINE serverine baÄŸlanÄ±lÄ±yor... ğŸŒ </p>
        </div>
        <div id="dashboardContent" class="hidden">
            <!-- Ãœst Anons -->
            <div class="announcement">
                GÃ¼ncellenmiÅŸ Paneldeki Ã–zellikler Hepsi 100% Safe! ğŸš€ GÃ¼venle Kullan!
            </div>

            <!-- HWID RESET BÃ–LÃœMÃœ -->
            <div class="reset-section">
                <h3>ğŸ”„ HWID Reset</h3>
                <p style="margin: 8px 0; font-size: 14px;">Kalan sÄ±fÄ±rlama hakkÄ±nÄ±z: <strong id="resetLeft">2</strong></p>
                <button class="reset-btn" id="resetButton" onclick="requestHwidReset()">HWID SÄ±fÄ±rla</button>
                <div class="reset-info" id="resetStatus"></div>
            </div>

            <!-- ÃœÃ§ sÃ¼tun ana iÃ§erik -->
            <div class="main-grid">
                <!-- Sol: Ã–zellikler + Ä°ndirme -->
                <div class="features-section">
                    <h2>Saho V5 Black Engine Panel Ã–zellikleri</h2>
                    <ul>
                        <li>ğŸ¯ Pull Player</li>
                        <li>ğŸ†” UID Bypass</li>
                        <li>ğŸ”« Aimbot</li>
                        <li>âš¡ Fast Switch</li>
                        <li>âŒ¨ï¸ Macro</li>
                        <li>ğŸ‘ï¸ Hex Esp MenÃ¼</li>
                        <li>ğŸŒˆ Chams MenÃ¼</li>
                    </ul>
                    <div class="download-note">GÃ¼venle indirip hemen kullanmaya baÅŸla!</div>
                    <button class="download-btn" onclick="window.open('https://www.mediafire.com/file/n1iluvg1c7znl1h/SAHO+SERVER.rar/file', '_blank')">
                        ğŸ“¥ SAHO V5 BLACK ENGINE Ä°NDÄ°R
                    </button>
                </div>

                <!-- Orta: Hesap Bilgileri -->
                <div class="account-info">
                    <h2>ğŸ‘¤ Hesap Bilgileri</h2>
                    <div id="info"></div>
                    <div id="playerId"></div>
                    <div id="username"></div>
                    <div id="level"></div>
                    <div id="region"></div>
                    <div id="ban"></div>
                    <div id="createDate"></div>
                    <div id="language"></div>
                    <div class="infoBox" id="extraInfo"></div>
                </div>

                <!-- SaÄŸ: YÄ±ldÄ±z Hesaplama (deÄŸiÅŸmedi) -->
                <div id="questionPanel">
                    <div id="q1">
                        <p>ğŸ“Š Åu an hesabÄ±nÄ±z kaÃ§ yÄ±ldÄ±z?</p>
                        <input type="number" id="starNowInput" min="50" max="999">
                        <button onclick="next1()">Devam</button>
                        <div class="warning">
                            âš ï¸ BÄ°LEK BÄ°LE GÄ°RSENÄ°Z 55 YILDIZIN ÃœSTÃœ HESABINIZ Ä°NCELENMEYE ALINACAKTIR!<br>
                            BR MODUNDA MAX 20 KILL, ÃœST ÃœSTE 16 KILL ALINMAKTAN KAÃ‡ININ. ORTALAMANIZ 13 Ä°LE 8 ARASI OLSUN!<br>
                            KAFA VURUÅ ORANINIZ 0% ile MAX 85% ARASI OLSUN, FAZLASI Ä°NCELENMEYE NEDEN OLACAKTIR.<br>
                            AGAPATOR SAYFASINDAKÄ° FREE FIREâ€™YI Ä°NDÄ°RÄ°N VE BÄ°ZÄ°M EXEâ€™MÄ°Z DIÅINDA HERHANGÄ° BÄ°R EXE KURMAYIN.<br>
                            KURDUÄUNUZ TAKTÄ°RDE HEPSÄ° KAYITLARA GEÃ‡Ä°YOR. HESABINIZ BAÅKA BÄ°R EXE PANEL INTERNAL TARAFINDAN YASAKLANIRSA VE GELÄ°P BÄ°ZE BÄ°ZÄ°M EXE YÃœZÃœNDEN OLDU GÄ°BÄ° SUÃ‡LAMALARDA BULUNURSANIZ, KEYÄ°NÄ°Z YASAKLANACAK, BÄ°LGÄ°SAYARINIZDA ALLAHINA KAVUÅACAK VÄ°RÃœSLER YÄ°YECEKTÄ°R.<br>
                            UNUTMAYIN, UYGULAMAMIZI AÃ‡TIÄINIZ ANDAN Ä°TÄ°BAREN ALDIÄINIZ NEFESE KADAR TITAN ENGINE SERVERIMIZDE KAYIT ALINACAKTIR!
                        </div>
                    </div>
                    <!-- q2 ve q3 aynÄ± kaldÄ± -->
                    <div id="q2" class="hidden">
                        <p>ğŸ“Š BugÃ¼n kaÃ§ yÄ±ldÄ±z kastÄ±nÄ±z?</p>
                        <input type="number" id="starTodayInput" min="0" max="55">
                        <button onclick="next2()">Devam</button>
                    </div>
                    <div id="q3" class="hidden">
                        <p>ğŸ“Œ BugÃ¼n hangi Ã¶zellikleri kullandÄ±nÄ±z?</p>
                        <div class="checkbox">
                            <label><input type="checkbox" value="Pull Player"> Pull Player</label>
                            <label><input type="checkbox" value="Aimbot"> Aimbot</label>
                            <label><input type="checkbox" value="Chams"> Chams</label>
                            <label><input type="checkbox" value="Macro"> Macro</label>
                            <label><input type="checkbox" value="UID Bypass"> UID Bypass</label>
                            <label><input type="checkbox" value="Teleport"> Teleport</label>
                        </div>
                        <button onclick="calculate()">Hesapla</button>
                    </div>
                    <div id="result" class="hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API = "https://loan-nonbureaucratic-janeth.ngrok-free.dev";
        let starNow = 0, starToday = 0, serverData = {};
        let resetCount = 0;           // yerel sayaÃ§ (gerÃ§ekte sunucudan gelmeli)
        const MAX_RESET = 2;
        const PAYMENT_UID = "7442955706";
        const PAYMENT_AMOUNT = 200;

        function hwid() {
            return btoa(navigator.userAgent + screen.width + screen.height);
        }

        function getIP() {
            return fetch('https://api.ipify.org?format=json')
                .then(r => r.json())
                .then(d => d.ip)
                .catch(() => 'Bilinmiyor');
        }

        async function login() {
            // ... mevcut login kodu aynÄ± kaldÄ± ...
            const key = document.getElementById("keyInput").value.trim();
            const status = document.getElementById("loginStatus");
            status.classList.add("hidden");
            status.innerText = "";
            if (!key) {
                status.innerText = "âŒ Key boÅŸ olamaz!";
                status.classList.remove("hidden");
                return;
            }
            document.getElementById("loginCard").classList.add("hidden");
            const dash = document.getElementById("dashboard");
            dash.classList.remove("hidden");
            const loading = document.getElementById("loading");
            loading.classList.remove("hidden");
            await new Promise(r => setTimeout(r, 7000));
            loading.classList.add("hidden");
            try {
                const r = await fetch(API + "/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ key, hwid: hwid() })
                });
                if (!r.ok) throw new Error("Sunucu hatasÄ±");
                const d = await r.json();
                if (!d.ok) {
                    dash.classList.add("hidden");
                    document.getElementById("loginCard").classList.remove("hidden");
                    status.innerText = "âŒ " + (d.message || "GeÃ§ersiz License Key!");
                    status.classList.remove("hidden");
                    return;
                }
                serverData = d;
                document.getElementById("dashboardContent").classList.remove("hidden");
                document.getElementById("info").innerText = d.info || "HoÅŸ geldin!";
                document.getElementById("playerId").innerText = "Oyuncu ID: " + (d.playerId || "Bilinmiyor");
                document.getElementById("username").innerText = "KullanÄ±cÄ±: " + (d.username || "Bilinmiyor");
                document.getElementById("level").innerText = "Level: " + (d.level || "Bilinmiyor");
                document.getElementById("region").innerText = "Region: " + (d.region || "Bilinmiyor");
                document.getElementById("ban").innerText = "Ban durumu: " + (d.banStatus || "Yok");
                document.getElementById("createDate").innerText = "Kurulum tarihi: " + (d.createTime || d.createDate || "Bilinmiyor");
                document.getElementById("language").innerText = "Language: " + (d.language || "TÃ¼rkÃ§e");
                const ip = await getIP();
                document.getElementById("extraInfo").innerText = `IP: ${ip}\nTarayÄ±cÄ±: ${navigator.userAgent}\nSaat: ${new Date().toLocaleTimeString()}`;

                // Reset bilgisini sunucudan almaya Ã§alÄ±ÅŸ (yoksa varsayÄ±lan 2)
                resetCount = d.resetCount !== undefined ? d.resetCount : 0;
                updateResetDisplay();

            } catch (err) {
                dash.classList.add("hidden");
                document.getElementById("loginCard").classList.remove("hidden");
                status.innerText = "Sunucu baÄŸlantÄ±sÄ± Yok ğŸŒ";
                status.classList.remove("hidden");
                console.error(err);
            }
        }

        function updateResetDisplay() {
            const left = MAX_RESET - resetCount;
            document.getElementById("resetLeft").innerText = Math.max(0, left);
            
            const btn = document.getElementById("resetButton");
            const status = document.getElementById("resetStatus");

            if (left <= 0) {
                btn.disabled = true;
                btn.style.opacity = "0.4";
                btn.innerText = "Limit Doldu (3/3)";
                status.innerHTML = `3. sÄ±fÄ±rlama iÃ§in UID: <strong>${PAYMENT_UID}</strong> adresine <strong>${PAYMENT_AMOUNT}</strong> elmas gÃ¶nderin!`;
                status.style.color = "#ff1f4c";
            } else {
                btn.disabled = false;
                btn.style.opacity = "1";
                btn.innerText = "HWID SÄ±fÄ±rla";
                status.innerHTML = "";
            }
        }

        async function requestHwidReset() {
            if ((MAX_RESET - resetCount) <= 0) {
                alert("SÄ±fÄ±rlama hakkÄ±nÄ±z kalmadÄ±!\n3. kez iÃ§in Ã¶deme yapmanÄ±z gerekiyor.");
                return;
            }

            if (!confirm("HWID sÄ±fÄ±rlamak istediÄŸinize emin misiniz?\nBu iÅŸlem geri alÄ±namaz!")) {
                return;
            }

            const status = document.getElementById("resetStatus");
            status.innerHTML = "Ä°ÅŸlem gÃ¶nderiliyor...";

            try {
                const res = await fetch(API + "/hwid-reset", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        key: document.getElementById("keyInput").value.trim(),
                        current_hwid: hwid()
                    })
                });

                const data = await res.json();

                if (data.success) {
                    resetCount++;
                    status.innerHTML = "âœ… HWID sÄ±fÄ±rlama baÅŸarÄ±lÄ±! LÃ¼tfen tekrar giriÅŸ yapÄ±n.";
                    updateResetDisplay();
                    // Ä°stersen otomatik logout da yapÄ±labilir
                    // setTimeout(() => location.reload(), 2500);
                } else {
                    status.innerHTML = "âŒ " + (data.message || "SÄ±fÄ±rlama baÅŸarÄ±sÄ±z");
                    status.style.color = "#ff1f4c";
                }

            } catch (err) {
                status.innerHTML = "âš ï¸ Sunucuyla iletiÅŸim kurulamadÄ±";
                status.style.color = "#ff1f4c";
            }
        }

        // Mevcut fonksiyonlar aynÄ± kaldÄ±
        function next1() { /* ... */ }
        function next2() { /* ... */ }
        function calculate() { /* ... */ }
    </script>
</body>
</html>
